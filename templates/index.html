<!DOCTYPE html>
<html>

<head> 
    <meta charset="utf-8" /> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" /> 

    <title>赛事预测</title> 
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --> 
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// --> 
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]--> 
</head> 

<body> 

<div class="container">


    <h1> 原始数据网址 </h1>

    <p> <a href="{{ url }}"> {{ url }} </a> </p>

    <h1>统计信息</h1>

    <ul>
        <li>主客平均: <span id='res-avg-hg'>{{ avg_hg }}</span></li>
        <li>总平均: <span id='res-avg-total'>{{ avg_total }}</span></li>
        <li>
            交锋固定1: <span id='const-vs1'></span>,
            加权平均: <span id='res-vs1'></span>
        </li>
        <li>
            交锋固定2: <span id='const-vs2'></span>,
            加权平均: <span id='res-vs2'></span>
        </li>
    </ul>

    <div class="result">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>主队</th>
                    <th>客队</th>
                    <th>交锋</th>
                </tr>
            </thead>
            <tbody>
                {% for h, v, g in result %}
                <tr><th scope="row">
                        {{ result_col_name[loop.index0] }}
                    </th>
                    <td>{{ h }}</td>
                    <td>{{ g }}</td>
                    <td>{{ v }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h1>最近 {{ topn }} 场比赛得分统计</h1>

    <p> 忽略比赛: {{ exclude_match | join(', ') }} </p>

    <div class="last-match">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>主队</th>
                    <th>客队</th>
                    <th>交锋</th>
                </tr>
            </thead>
            <tbody>
                {% for i in range(topn) %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td><span class="topn-host">{{ topn_host[i] }}</span></td>
                    <td><span class="topn-guest">{{ topn_guest[i] }}</span></td>
                    <td><span class="topn-vs">
                        {% if i < vs_num %}
                            {{ topn_vs[i] }}
                        {% else %}
                            -
                        {% endif %}
                    </span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h1> 主队历史比赛 </h1>
    <div class="host-match">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>比赛时间</th>
                    <th>进球数</th>
                    <th>比赛类型</th>
                </tr>
            </thead>
            <tbody>
                {% for m in orig_host %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td>{{ m[0] }}</td>
                    <td>{{ m[1] }}</td>
                    <td>{{ m[2] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h1> 客队历史比赛 </h1>
    <div class="guest-match">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>比赛时间</th>
                    <th>进球数</th>
                    <th>比赛类型</th>
                </tr>
            </thead>
            <tbody>
                {% for m in orig_guest %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td>{{ m[0] }}</td>
                    <td>{{ m[1] }}</td>
                    <td>{{ m[2] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <h1> 交战记录 </h1>
    <div class="vs-match">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>比赛时间</th>
                    <th>进球数</th>
                    <th>比赛类型</th>
                </tr>
            </thead>
            <tbody>
                {% for m in orig_vs %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td>{{ m[0] }}</td>
                    <td>{{ m[1] }}</td>
                    <td>{{ m[2] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

<script src="../static/js/jquery.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>


<script type="text/javascript">
$(document).ready(function() {
    temp = $("#res-avg-hg").text()*2;

    var calc_vs = function(const_vs) {
        return (1.0*const_vs + temp) / 3.0;
    };

    $("#res-vs1").text(calc_vs($("#const-vs1").text()));
    $("#res-vs2").text(calc_vs($("#const-vs2").text()));
});
</script>
</body>

</html>
